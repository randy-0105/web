<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Inicio de Sesión | TDAH & Autismo</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header>
        <div class="logo" style="display: flex; align-items: center; gap: 10px;">
            <a href="index.html">
                <img src="IMAGENES/imagenesLogo/IsoLogo1.png" alt="Unikids Logo" style="height: 50px;" />
            </a>
            <a href="index.html" style="font-size: 1.8rem; font-weight: bold; color: #333; text-decoration: none;">Unikids</a>
        </div>
        <nav>
            <ul class="menu">
                <li><a href="index.html">Inicio</a></li>
                <li class="dropdown">
                    <a href="#">Padres</a>
                    <ul class="dropdown-content">
                        <li><a href="parenthood/diagnostico.html">Formulario de Evaluación</a></li>
                        <li><a href="parenthood/index.html">Testimonios</a></li>
                        <li><a href="parenthood/consejos.html">Consejos</a></li>
                        <li><a href="parenthood/feedback.html">Feedback</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#">Niños</a>
                    <ul class="dropdown-content">
                        <li><a href="ninos\Juegos_Educativos\juegos.html">Juegos Educativos</a></li>
                        <li><a href="ninos\Refuersos Academico\refuersos.html">Refuerzos Académicos</a></li>
                    </ul>
                </li>
                <li><a href="suscripcion.html">Suscripción</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="login">
            <h1>Inicio de Sesión</h1>
            <form id="loginForm" novalidate action="login.php" method="post">
                <label for="email">Correo Electrónico:</label>
                <input type="email" id="email" name="email" required />

                <label for="password">Contraseña:</label>
                <input type="password" id="password" name="password" required />

                <button type="submit" class="btn-primary">Iniciar Sesión</button>
            </form>

            <form id="verificationForm" novalidate style="display: none;">
                <label for="verificationCode">Código de Verificación:</label>
                <input type="text" id="verificationCode" name="verificationCode" required />
                <button type="submit" class="btn-primary">Verificar</button>
            </form>

            <div id="loginMessage" aria-live="polite" class="login-message"></div>

            <h2>¿No tienes una cuenta? Regístrate</h2>
            <form id="registerForm" novalidate action="register.php" method="post">
                <label for="registerEmail">Correo Electrónico:</label>
                <input type="email" id="registerEmail" name="registerEmail" required />

                <label for="registerPassword">Contraseña:</label>
                <input type="password" id="registerPassword" name="registerPassword" required />

                <button type="submit" class="btn-primary">Registrarse</button>
            </form>
        </section>
    </main>

        <script src="auth.js"></script>
        <script>
            let currentUser = null;

            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = e.target.email.value.trim();
                const password = e.target.password.value.trim();

                if (!email || !password) {
                    showMessage("Por favor, complete todos los campos.");
                    return;
                }

                currentUser = login(email, password);
                if (currentUser) {
                    showMessage("Código de verificación enviado. Por favor, ingréselo.");
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('verificationForm').style.display = 'block';
                } else {
                    showMessage("Usuario o contraseña incorrectos.");
                }
            });

            document.getElementById('verificationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const code = e.target.verificationCode.value.trim();
                if (!code) {
                    showMessage("Por favor, ingrese el código de verificación.");
                    return;
                }
                if (verifyCode(currentUser, code)) {
                    showMessage("Verificación exitosa. Bienvenido!");
                    // Aquí se puede redirigir a la página personalizada del usuario
                } else {
                    showMessage("Código de verificación incorrecto.");
                }
            });

            function showMessage(msg) {
                const messageDiv = document.getElementById('loginMessage');
                messageDiv.textContent = msg;
                messageDiv.style.color = msg.toLowerCase().includes("error") || msg.toLowerCase().includes("incorrecto") ? "red" : "green";
            }
        </script>
    <footer>
        <div class="footer-content">
            <div class="contact-info">
                <h3>Contacto</h3>
                <p>Email: contacto@tdah-autismo.com</p>
                <p>Teléfono: +123 456 7890</p>
            </div>
            <div class="social-media">
                <h3>Síguenos</h3>
                <ul>
                    <li><a href="#" aria-label="Instagram">Instagram</a></li>
                </ul>
            </div>
            <div class="quick-links">
                <h3>Enlaces Rápidos</h3>
                <ul>
                    <li><a href="parenthood/index.html">Para Padres</a></li>
                    <li><a href="ninos/juegos.html">Para Niños</a></li>
                    <li><a href="suscripcion.html">Suscripción</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 Unikids. Todos los derechos reservados.</p>
        </div>
    </footer>
</body>
</html>
